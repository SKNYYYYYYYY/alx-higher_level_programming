if else, loops and a bit of functions